<!DOCTYPE html>
<html itemscope="" itemtype="http://schema.org/Blog">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta content="IE=edge" http-equiv="X-UA-Compatible">
<title>UICollectionView Example - Ash Furrow</title>
<link rel="alternate" type="application/atom+xml" title="Atom Feed" href="//feed.ashfurrow.com/feed.xml">
<link rel="alternate" type="application/rss+xml" title="RSS Feed" href="//feed.ashfurrow.com/feed.rss.xml">
<meta content="width=device-width initial-scale=1 viewport-fit=cover" name="viewport">
<link href="https://ashfurrow.com/blog/uicollectionview-example/" rel="canonical">
<meta content="Ash Furrow" itemprop="name">
<meta content="https://ashfurrow.com/blog/uicollectionview-example/" itemprop="url">
<meta content="We’re going to take a look at the new UICollectionView class Apple introduced in iOS 6. It’s used to display a grid of cells, and what better to display in those cells than some beautiful photos from 500px? I’ve got an example project completed and..." itemprop="about">
<meta content="We’re going to take a look at the new UICollectionView class Apple introduced in iOS 6. It’s used to display a grid of cells, and what better to display in those cells than some beautiful photos from 500px? I’ve got an example project completed and..." itemprop="description">
<meta content="https://ashfurrow.com/img/siteimage_dark.png" itemprop="thumbnailUrl">
<meta content="Ash Furrow" property="og:site_name">
<meta content="UICollectionView Example" property="og:title">
<meta content="https://ashfurrow.com/blog/uicollectionview-example/" property="og:url">
<meta content="website" property="og:type">
<meta content="We’re going to take a look at the new UICollectionView class Apple introduced in iOS 6. It’s used to display a grid of cells, and what better to display in those cells than some beautiful photos from 500px? I’ve got an example project completed and..." property="og:description">
<meta content="https://ashfurrow.com/img/import/blog/uicollectionview-example/D64FDC4D8F644D60A15675757BC8EA95.png" property="og:image">
<meta content="summary" name="twitter:card">
<meta content="@ashfurrow" name="twitter:site">
<meta content="@ashfurrow" name="twitter:creator">
<meta content="UICollectionView Example" name="twitter:title">
<meta content="We’re going to take a look at the new UICollectionView class Apple introduced in iOS 6. It’s used to display a grid of cells, and what better to display in those cells than some beautiful photos from 500px? I’ve got an example project completed and..." name="twitter:description">
<meta content="https://ashfurrow.com/img/import/blog/uicollectionview-example/D64FDC4D8F644D60A15675757BC8EA95.png" name="twitter:image">
<link href="https://ashfurrow.com/img/siteimage_dark.png" rel="image_src">
<meta content="https://ashfurrow.com/img/siteimage_dark.png" itemprop="image">
<link href="/favicon.ico" rel="shortcut icon" type="image/x-icon">
<link href="/apple-touch-icon-57x57.png" rel="apple-touch-icon" sizes="57x57">
<link href="/apple-touch-icon-60x60.png" rel="apple-touch-icon" sizes="60x60">
<link href="/apple-touch-icon-72x72.png" rel="apple-touch-icon" sizes="72x72">
<link href="/apple-touch-icon-76x76.png" rel="apple-touch-icon" sizes="76x76">
<link href="/apple-touch-icon-114x114.png" rel="apple-touch-icon" sizes="114x114">
<link href="/apple-touch-icon-120x120.png" rel="apple-touch-icon" sizes="120x120">
<link href="/apple-touch-icon-144x144.png" rel="apple-touch-icon" sizes="144x144">
<link href="/apple-touch-icon-152x152.png" rel="apple-touch-icon" sizes="152x152">
<link href="/apple-touch-icon-180x180.png" rel="apple-touch-icon" sizes="180x180">
<link href="/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png">
<link href="/android-chrome-192x192.png" rel="icon" sizes="192x192" type="image/png">
<link href="/favicon-96x96.png" rel="icon" sizes="96x96" type="image/png">
<link href="/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png">
<link href="/manifest.json" rel="manifest">
<link color="#398ccc" href="/safari-pinned-tab.svg" rel="mask-icon">
<meta content="#da532c" name="msapplication-TileColor">
<meta content="/mstile-144x144.png" name="msapplication-TileImage">
<meta content="#398ccc" name="theme-color">
<script type="application/ld+json">
  {"@context":"http://schema.org","@type":"Person","name":"Ash Furrow","url":"https://ashfurrow.com","image":"https://static.ashfurrow.com/ashfurrow_thumbsup_square.jpeg","sameAs":["https://twitter.com/ashfurrow","https://instagram.com/ashfurrow","https://github.com/ashfurrow"]}
</script>
<script type="application/ld+json">
  {"@context":"http://schema.org","@type":"WebSite","url":"https://ashfurrow.com","potentialAction":{"@type":"SearchAction","target":"https://ashfurrow.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}
</script>
<script type="application/ld+json">
  {"@context":"http://schema.org","@type":"NewsArticle","image":["https://ashfurrow.com/img/import/blog/uicollectionview-example/D64FDC4D8F644D60A15675757BC8EA95.png","https://ashfurrow.com/img/import/blog/uicollectionview-example/BDF26DDF70744C57813ED87D31033FAF.png","https://ashfurrow.com/img/import/blog/uicollectionview-example/3B0B5635D36F497B84851AA27A9494C7.png","https://ashfurrow.com/img/import/blog/uicollectionview-example/8A0115CB76E64B218DCD9E158D6AF93D.png","https://ashfurrow.com/img/import/blog/uicollectionview-example/226450BE3A464F44B4A4B8706BDC0612.png","https://ashfurrow.com/img/import/blog/uicollectionview-example/3E628B26764C4ACDA973588CAE0C2678.png","https://ashfurrow.com/img/import/blog/uicollectionview-example/2E0D5ECB395F41DEA921597398D5E79E.png","https://ashfurrow.com/img/import/blog/uicollectionview-example/E8ECC8892EEB418D9FE04C6A04AD5436.png","https://ashfurrow.com/img/import/blog/uicollectionview-example/AF66949DE9D6407C8288A2B406292DB8.png","https://ashfurrow.com/img/import/blog/uicollectionview-example/2E826D143C214E178029F7B19AE16936.png"],"author":"Ash Furrow","datePublished":"2012-09-19 00:00:00 UTC","headLine":"UICollectionView Example","mainEntityOfPage":{"@type":"WebPage","@id":"https://ashfurrow.com/blog/uicollectionview-example/"},"publisher":{"@type":"Organization","name":"Ash Furrow","logo":{"@type":"ImageObject","url":"https://static.ashfurrow.com/ashfurrow_thumbsup_square.jpeg"}}}
</script>
<script type="application/ld+json">
  {"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://ashfurrow.com","name":"Ash Furrow","image":"https://static.ashfurrow.com/ashfurrow_thumbsup_square.jpeg"}},{"@type":"ListItem","position":2,"item":{"@id":"https://ashfurrow.com/blog","name":"Blog","image":"https://ashfurrow.com/img/siteimage_dark.png"}},{"@type":"ListItem","position":3,"item":{"@id":"https://ashfurrow.com/blog/uicollectionview-example/","name":"UICollectionView Example","image":"https://ashfurrow.com/img/import/blog/uicollectionview-example/D64FDC4D8F644D60A15675757BC8EA95.png"}}]}
</script><style type="text/css">html {
  font-family: sans-serif;
  -webkit-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
}

body {
  margin: 0;
}

header,
nav {
  display: block;
}

a {
  background: 0 0;
}

h1 {
  margin: .67em 0;
  font-size: 2em;
}

hr {
  height: 0;
  -webkit-box-sizing: content-box;
  -moz-box-sizing: content-box;
  box-sizing: content-box;
}

button {
  margin: 0;
  font: inherit;
  color: inherit;
}

button {
  overflow: visible;
}

button {
  text-transform: none;
}

button {
  -webkit-appearance: button;
}

button::-moz-focus-inner {
  padding: 0;
  border: 0;
}

* {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

:before,
:after {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

html {
  font-size: 10px;
}

body {
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
  font-size: 14px;
  line-height: 1.42857143;
  color: #333;
  background-color: #fff;
}

button {
  font-family: inherit;
  font-size: inherit;
  line-height: inherit;
}

a {
  color: #428bca;
  text-decoration: none;
}

hr {
  margin-top: 20px;
  margin-bottom: 20px;
  border: 0;
  border-top: 1px solid #eee;
}

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  border: 0;
}

h1,
h2 {
  font-family: inherit;
  font-weight: 500;
  line-height: 1.1;
  color: inherit;
}

h1,
h2 {
  margin-top: 20px;
  margin-bottom: 10px;
}

h1 {
  font-size: 36px;
}

h2 {
  font-size: 30px;
}

.small {
  font-size: 85%;
}

ul,
ol {
  margin-top: 0;
  margin-bottom: 10px;
}

.container {
  padding-right: 15px;
  padding-left: 15px;
  margin-right: auto;
  margin-left: auto;
}

@media (min-width:768px) {
  .container {
    width: 750px;
  }
}

@media (min-width:992px) {
  .container {
    width: 970px;
  }
}

@media (min-width:1200px) {
  .container {
    width: 1170px;
  }
}

.container-fluid {
  padding-right: 15px;
  padding-left: 15px;
  margin-right: auto;
  margin-left: auto;
}

.row {
  margin-right: -15px;
  margin-left: -15px;
}

.col-lg-4,
.col-md-5,
.col-sm-6,
.col-lg-8,
.col-md-10 {
  position: relative;
  min-height: 1px;
  padding-right: 15px;
  padding-left: 15px;
}

@media (min-width:768px) {
  .col-sm-6 {
    float: left;
  }

  .col-sm-6 {
    width: 50%;
  }
}

@media (min-width:992px) {
  .col-md-5,
  .col-md-10 {
    float: left;
  }

  .col-md-10 {
    width: 83.33333333%;
  }

  .col-md-5 {
    width: 41.66666667%;
  }

  .col-md-offset-1 {
    margin-left: 8.33333333%;
  }
}

@media (min-width:1200px) {
  .col-lg-4,
  .col-lg-8 {
    float: left;
  }

  .col-lg-8 {
    width: 66.66666667%;
  }

  .col-lg-4 {
    width: 33.33333333%;
  }

  .col-lg-offset-2 {
    margin-left: 16.66666667%;
  }
}

.collapse {
  display: none;
}

.nav {
  padding-left: 0;
  margin-bottom: 0;
  list-style: none;
}

.nav > li {
  position: relative;
  display: block;
}

.nav > li > a {
  position: relative;
  display: block;
  padding: 10px 15px;
}

.navbar {
  position: relative;
  min-height: 50px;
  margin-bottom: 20px;
  border: 1px solid transparent;
}

@media (min-width:768px) {
  .navbar {
    border-radius: 4px;
  }
}

@media (min-width:768px) {
  .navbar-header {
    float: left;
  }
}

.navbar-collapse {
  padding-right: 15px;
  padding-left: 15px;
  overflow-x: visible;
  -webkit-overflow-scrolling: touch;
  border-top: 1px solid transparent;
  -webkit-box-shadow: inset 0 1px 0 rgba(255, 255, 255, .1);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, .1);
}

@media (min-width:768px) {
  .navbar-collapse {
    width: auto;
    border-top: 0;
    -webkit-box-shadow: none;
    box-shadow: none;
  }

  .navbar-collapse.collapse {
    display: block !important;
    height: auto !important;
    padding-bottom: 0;
    overflow: visible !important;
  }

  .navbar-fixed-top .navbar-collapse {
    padding-right: 0;
    padding-left: 0;
  }
}

.navbar-fixed-top .navbar-collapse {
  max-height: 340px;
}

@media (max-width:480px) and (orientation:landscape) {
  .navbar-fixed-top .navbar-collapse {
    max-height: 200px;
  }
}

.container-fluid > .navbar-header,
.container-fluid > .navbar-collapse {
  margin-right: -15px;
  margin-left: -15px;
}

@media (min-width:768px) {
  .container-fluid > .navbar-header,
  .container-fluid > .navbar-collapse {
    margin-right: 0;
    margin-left: 0;
  }
}

.navbar-fixed-top {
  position: fixed;
  right: 0;
  left: 0;
  z-index: 1030;
  -webkit-transform: translate3d(0, 0, 0);
  -o-transform: translate3d(0, 0, 0);
  transform: translate3d(0, 0, 0);
}

@media (min-width:768px) {
  .navbar-fixed-top {
    border-radius: 0;
  }
}

.navbar-fixed-top {
  top: 0;
  border-width: 0 0 1px;
}

.navbar-brand {
  float: left;
  height: 50px;
  padding: 15px 15px;
  font-size: 18px;
  line-height: 20px;
}

@media (min-width:768px) {
  .navbar > .container-fluid .navbar-brand {
    margin-left: -15px;
  }
}

.navbar-toggle {
  position: relative;
  float: right;
  padding: 9px 10px;
  margin-top: 8px;
  margin-right: 15px;
  margin-bottom: 8px;
  background-color: transparent;
  background-image: none;
  border: 1px solid transparent;
  border-radius: 4px;
}

.navbar-toggle .icon-bar {
  display: block;
  width: 22px;
  height: 2px;
  border-radius: 1px;
}

.navbar-toggle .icon-bar + .icon-bar {
  margin-top: 4px;
}

@media (min-width:768px) {
  .navbar-toggle {
    display: none;
  }
}

.navbar-nav {
  margin: 7.5px -15px;
}

.navbar-nav > li > a {
  padding-top: 10px;
  padding-bottom: 10px;
  line-height: 20px;
}

@media (min-width:768px) {
  .navbar-nav {
    float: left;
    margin: 0;
  }

  .navbar-nav > li {
    float: left;
  }

  .navbar-nav > li > a {
    padding-top: 15px;
    padding-bottom: 15px;
  }

  .navbar-nav.navbar-right:last-child {
    margin-right: -15px;
  }
}

@media (min-width:768px) {
  .navbar-right {
    float: right !important;
  }
}

.navbar-default {
  background-color: #f8f8f8;
  border-color: #e7e7e7;
}

.navbar-default .navbar-brand {
  color: #777;
}

.navbar-default .navbar-nav > li > a {
  color: #777;
}

.navbar-default .navbar-toggle {
  border-color: #ddd;
}

.navbar-default .navbar-toggle .icon-bar {
  background-color: #888;
}

.navbar-default .navbar-collapse {
  border-color: #e7e7e7;
}

.container:before,
.container:after,
.container-fluid:before,
.container-fluid:after,
.row:before,
.row:after,
.nav:before,
.nav:after,
.navbar:before,
.navbar:after,
.navbar-header:before,
.navbar-header:after,
.navbar-collapse:before,
.navbar-collapse:after {
  display: table;
  content: " ";
}

.container:after,
.container-fluid:after,
.row:after,
.nav:after,
.navbar:after,
.navbar-header:after,
.navbar-collapse:after {
  clear: both;
}

@-ms-viewport {
  width: device-width;
}

body {
  font-family: 'ff-tisa-web-pro', 'Georgia', 'Times New Roman', serif;
  color: #404040;
  font-size: 1.5em;
  line-height: 1.5em;
}

@media (min-width: 768px) {
  body {
    font-size: 2em;
    line-height: 1.5em;
  }
}

body {
  -ms-font-feature-settings: "liga";
  font-variant-ligatures: common-ligatures;
}

@supports not (font-variant-ligatures: common-ligatures) {
  body {
    font-feature-settings: "liga";
  }
}

h1,
h2 {
  font-family: 'futura-pt', 'Futura', 'Helvetica Neue', Helvetica, Arial, sans-serif;
  font-weight: 700;
}

a {
  color: #404040;
}

hr.small {
  max-width: 100px;
  margin: 15px auto;
  border-width: 3px;
  border-color: white;
}

.navbar-custom {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  z-index: 3;
  font-family: 'futura-pt', 'Futura', 'Helvetica Neue', Helvetica, Arial, sans-serif;
}

.navbar-custom .navbar-brand {
  font-weight: 700;
}

.navbar-custom .nav li a {
  text-transform: uppercase;
  font-size: 0.75em;
  font-weight: 700;
  letter-spacing: 1px;
}

@media only screen and (min-width: 768px) {
  .navbar-custom {
    background: transparent;
    border-bottom: 1px solid transparent;
  }

  .navbar-custom .navbar-brand {
    color: white;
    padding: 1.25em;
  }

  .navbar-custom .nav li a {
    color: white;
    padding: 1.25em;
  }
}

@media only screen and (min-width: 1170px) {
  .navbar-custom {
    -webkit-transform: translate3d(0, 0, 0);
    -moz-transform: translate3d(0, 0, 0);
    -ms-transform: translate3d(0, 0, 0);
    -o-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
  }
}

.intro-header {
  background: no-repeat center center;
  background-color: gray;
  background-attachment: scroll;
  -webkit-background-size: cover;
  -moz-background-size: cover;
  background-size: cover;
  -o-background-size: cover;
}

.intro-header .site-heading {
  padding: 6em 0 3em;
  color: white;
}

@media only screen and (min-width: 768px) {
  .intro-header .site-heading {
    padding: 7em 0;
  }
}

.intro-header .site-heading {
  text-align: center;
}

.intro-header .site-heading h1 {
  margin-top: 0;
  font-size: 2.5em;
}

.intro-header .site-heading .subheading {
  font-size: 1em;
  line-height: 1.1;
  display: block;
  font-family: 'futura-pt', 'Futura', 'Helvetica Neue', Helvetica, Arial, sans-serif;
  font-weight: 400;
  margin: 10px 0 0;
}

@media only screen and (min-width: 768px) {
  .intro-header .site-heading h1 {
    font-size: 4em;
  }
}

body {
  webkit-tap-highlight-color: #398CCC;
}

.container .recent-blog-posts ol {
  padding-left: 0;
}

.container .recent-blog-posts li {
  list-style-image: none;
  list-style-position: outside;
  list-style-type: none;
  padding-top: 0;
  padding-bottom: 0.25em;
}

@media (min-width: 768px) {
  .featured-blog-posts {
    padding-top: 1em;
  }
}

.featured-blog-posts a {
  color: white;
}

.featured-blog-posts .embedded {
  margin-bottom: 1em;
}

@media (min-width: 768px) {
  .featured-blog-posts .embedded {
    margin-bottom: 1.5em;
  }
}

.featured-blog-posts .preview {
  -webkit-background-size: cover;
  -moz-background-size: cover;
  background-size: cover;
  -o-background-size: cover;
  min-height: 6.5em;
}

@media (min-width: 992px) {
  .featured-blog-posts .preview {
    min-height: 6.5em;
  }
}

.featured-blog-posts .preview h2 {
  padding: 0.5em;
  margin: 0;
}

.featured-blog-posts h2 {
  padding-bottom: 0.25em;
}

@media (min-width: 768px) {
  .nav .text-link {
    display: none;
  }
}

.nav .icon-link {
  font-size: 1em;
  display: none;
}

@media (min-width: 768px) {
  .nav .icon-link {
    display: inherit;
  }
}

header {
  -webkit-box-shadow: rgba(0, 0, 0, 0.1) 0px -50px 50px 0px inset;
  position: relative;
}

.header-dimmer {
  background-color: rgba(0, 0, 0, 0.2);
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
}

.container li {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
}

.intro-header {
  margin-bottom: 0;
}

@media only screen and (max-width: 768px) {
  .intro-header .site-heading h1 {
    font-size: 2.5em;
  }

  .intro-header .site-heading .subheading {
    font-size: 1.25em;
  }
}

@font-face {
  font-family: 'icomoon';
  src: url('/fonts/icomoon.eot?-ar0ypv');
  src: url('/fonts/icomoon.eot?#iefix-ar0ypv') format("embedded-opentype"), url('/fonts/icomoon.ttf?-ar0ypv') format("truetype"), url('/fonts/icomoon.woff?-ar0ypv') format("woff"), url('/fonts/icomoon.svg?-ar0ypv#icomoon') format("svg");
  font-weight: normal;
  font-style: normal;
}

[class^="icon-"] {
  font-family: 'icomoon';
  speak: none;
  font-style: normal;
  font-weight: normal;
  font-variant: normal;
  text-transform: none;
  line-height: 1;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.icon-site-logo:before {
  content: "\e602";
}

.fa-search:before {
  content: "\f002";
}

.fa-rss-square:before {
  content: "\f143";
}
</style>
<script type="text/javascript">// From https://github.com/morris/typekit-cache
!function(e,t,n,a,r,c,l,s,o){l=a[r],l&&(s=e.createElement("style"),s.innerHTML=l,e.getElementsByTagName("head")[0].appendChild(s),e.documentElement.className+=" wf-cached"),o=t[n],t[n]=function(e,p,u,i){if("string"==typeof p&&p.indexOf(c)>-1){try{u=new XMLHttpRequest,u.open("GET",p,!0),u.onreadystatechange=function(){try{4==u.readyState&&(i=u.responseText.replace(/url\(\//g,"url("+c+"/"),i!==l&&(a[r]=i))}catch(e){s&&(s.innerHTML="")}},u.send(null)}catch(d){}t[n]=o}return o.apply(this,arguments)}}(document,Element.prototype,"setAttribute",localStorage,"tk","https://use.typekit.net");

(function(d) {
  var config = {
    kitId: 'fmr6vlo',
    scriptTimeout: 3000,
    async: true
  },
  h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\bwf-loading\b/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
})(document);
</script><script type="text/javascript">/*!
loadCSS: load a CSS file asynchronously.
[c]2015 @scottjehl, Filament Group, Inc.
Licensed MIT
*/

(function(w){
	"use strict";
	/* exported loadCSS */
	w.loadCSS = function( href, before, media ){
		// Arguments explained:
		// `href` [REQUIRED] is the URL for your CSS file.
		// `before` [OPTIONAL] is the element the script should use as a reference for injecting our stylesheet <link> before
			// By default, loadCSS attempts to inject the link after the last stylesheet or script in the DOM. However, you might desire a more specific location in your document.
		// `media` [OPTIONAL] is the media type or query of the stylesheet. By default it will be 'all'
		var ss = w.document.createElement( "link" );
		var ref;
		if( before ){
			ref = before;
		}
		else if( w.document.querySelectorAll ){
			var refs = w.document.querySelectorAll(  "style,link[rel=stylesheet],script" );
			// No need to check length. This script has a parent element, at least
			ref = refs[ refs.length - 1];
		}
		else {
			ref = w.document.getElementsByTagName( "script" )[ 0 ];
		}

		var sheets = w.document.styleSheets;
		ss.rel = "stylesheet";
		ss.href = href;
		// temporarily set media to something inapplicable to ensure it'll fetch without blocking render
		ss.media = "only x";

		// Inject link
			// Note: the ternary preserves the existing behavior of "before" argument, but we could choose to change the argument to "after" in a later release and standardize on ref.nextSibling for all refs
			// Note: `insertBefore` is used instead of `appendChild`, for safety re: http://www.paulirish.com/2011/surefire-dom-element-insertion/
		ref.parentNode.insertBefore( ss, ( before ? ref : ref.nextSibling ) );
		// A method (exposed on return object for external use) that mimics onload by polling until document.styleSheets until it includes the new sheet.
		ss.onloadcssdefined = function( cb ){
			var defined;
			for( var i = 0; i < sheets.length; i++ ){
				if( sheets[ i ].href && sheets[ i ].href === ss.href ){
					defined = true;
				}
			}
			if( defined ){
				cb();
			} else {
				setTimeout(function() {
					ss.onloadcssdefined( cb );
				});
			}
		};

		// once loaded, set link's media back to `all` so that the stylesheet applies once it loads
		ss.onloadcssdefined(function() {
			ss.media = media || "all";
		});
		return ss;
	};
}(this));
</script><link crossorigin="anonymous" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" rel="stylesheet">
<script>loadCSS('//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css');
loadCSS('/css/all.css');</script><noscript><link href="/css/all.css" rel="stylesheet"></noscript>
</head>
<body>
<nav class="navbar navbar-default navbar-custom navbar-fixed-top"><div class="container-fluid">
<div class="navbar-header page-scroll">
<button class="navbar-toggle" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button"><span class="sr-only">Toggle Navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/"><i class="icon-site-logo"></i></a>
</div>
<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1"><ul class="nav navbar-nav navbar-right">
<li><a href="/blog">Blog</a></li>
<li><a href="/about/">About</a></li>
<li><a href="/books/">Books</a></li>
<li><a href="/portfolio/">Portfolio</a></li>
<li><a href="/speaking/">Speaking</a></li>
<li>
<a href="/search" class="text-link">Search</a><a href="/search" class="icon-link"><i class="fa fa-search"></i></a>
</li>
<li>
<a href="//feed.ashfurrow.com/feed.xml" class="text-link">Blog Feed</a><a href="//feed.ashfurrow.com/feed.xml" class="icon-link"><i class="fa fa-rss-square"></i></a>
</li>
</ul></div>
</div></nav><header class="intro-header" style="background-image: url('/img/backgrounds/default.jpg');"><div class="header-dimmer"></div>
<div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class="post-heading">
<h1>UICollectionView Example</h1>
<hr class="small">
<span class="subheading">September 19, 2012</span>
</div></div></div></div></header><div class="container">
<article><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
<p>We’re going to take a look at the new <code>UICollectionView</code> class Apple introduced in iOS 6. It’s used to display a grid of cells, and what better to display in those cells than some beautiful photos from 500px?</p>

<p>I’ve got an example project completed and hosted <a href="https://github.com/AshFurrow/UICollectionViewExample">on github</a> that you can check out and play with. Don’t forget to <a href="http://developers.500px.com/settings/applications?from=developers">register yourself with 500px</a> first to get a consumer key and consumer secret, or else the API won’t work for you. Copy these into a text file because you’ll need them later.</p>

<p>Xcode might introduce a new template for collection view apps, but in the mean time, we’ll have to modify an existing project that uses <code>UITableView</code>.</p>

<p>Create a new Xcode project using the “Master-Detail Application” template.</p>

<p>Open the main Storyboard file. We’re going to throw away the existing table view and replace it with a great new collection view. The easiest way to do that is to select the existing Master View Controller, shown below, and hit the delete key.</p>

<p><img src="/img/import/blog/uicollectionview-example/D64FDC4D8F644D60A15675757BC8EA95.png" alt="D64fdc4d8f644d60a15675757bc8ea95"></p>

<p>Now that the Master View Controller is missing, we need to re-add it. Go to your Master View Controller’s <code>.h</code> file and change it from inheriting from <code>UITableViewController</code> to <code>UICollectionViewController</code>. You’ll get some compiler errors; ignore them for now.</p>

<p>Drag a new <code>UICollectionViewController</code> form the library. Right click and drag from the Navigation Controller onto the collection view controller and select the “root view controller” outlet.</p>

<p><img src="/img/import/blog/uicollectionview-example/BDF26DDF70744C57813ED87D31033FAF.png" alt="Bdf26ddf70744c57813ed87d31033faf"></p>

<p>Right. Almost there. Open the identity inspector (⌘⎇3) and give the new UICollectionViewController the class name of your Master View Controller.</p>

<p><img src="/img/import/blog/uicollectionview-example/3B0B5635D36F497B84851AA27A9494C7.png" alt="3b0b5635d36f497b84851aa27a9494c7"></p>

<p>We’ll worry about the segues later. For now, go to the <code>UICollectionViewController</code> subclass’ <code>.m</code> file. We’ll fix those compiler errors now.</p>

<p><img src="/img/import/blog/uicollectionview-example/8A0115CB76E64B218DCD9E158D6AF93D.png" alt="8a0115cb76e64b218dcd9e158d6af93d"></p>

<p>It’s always something with you, isn’t it, Xcode?</p>

<p>We’re going to gut the contents of the master view controller that deal with the <code>tableView</code> property (which we replaced). For this example, I’m deleting the following method:</p>
<div class="highlight"><pre class="highlight objective_c"><code><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">tableView</span><span class="p">:(</span><span class="n">UITableView</span> <span class="o">*</span><span class="p">)</span><span class="nv">tableView</span> <span class="nf">commitEditingStyle</span><span class="p">:(</span><span class="n">UITableViewCellEditingStyle</span><span class="p">)</span><span class="nv">editingStyle</span> <span class="nf">forRowAtIndexPath</span><span class="p">:(</span><span class="n">NSIndexPath</span> <span class="o">*</span><span class="p">)</span><span class="nv">indexPath</span>
</code></pre></div>
<p>Everywhere else you see <code>tableView</code> cuasing a problem, replace it with <code>collectionView</code>. The two classes behave almost identically, so it’ll be an easy conversion.</p>

<p>The only problem I had was</p>
<div class="highlight"><pre class="highlight objective_c"><code><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">collectionView</span> <span class="nf">indexPathForSelectedRow</span><span class="p">];</span>
</code></pre></div>
<p><code>UICollectionView</code> doesn’t have the method <code>indexPathForSelectedRow</code>, so replace that line with the following:</p>
<div class="highlight"><pre class="highlight objective_c"><code><span class="p">[[</span><span class="n">self</span><span class="p">.</span><span class="n">collectionView</span> <span class="nf">indexPathsForSelectedItems</span><span class="p">]</span> <span class="nf">lastObject</span><span class="p">];</span>
</code></pre></div>
<p>You’ll also need to modify the <code>insertSections:withRowAnimation:</code> method calls, since <code>UICollectionView</code> doesn’t have row animations; just remove the second part of the selector name.</p>

<p>Once you deal with all of the transition, you have a an app that runs, but is empty. Let’s fill it with beautiful photos.</p>

<p><img src="/img/import/blog/uicollectionview-example/226450BE3A464F44B4A4B8706BDC0612.png" alt="226450be3a464f44b4a4b8706bdc0612"></p>

<p>We need a data model. Since we’re smart, accomplished, and handsome developers, let’s use Core Data. Create the following Core Data model.</p>

<p><img src="/img/import/blog/uicollectionview-example/3E628B26764C4ACDA973588CAE0C2678.png" alt="3e628b26764c4acda973588cae0c2678"></p>

<p>All we need is a <code>photoRating</code> to sort by and <code>photoImageData</code> to display actual images, but let’s add a <code>photoName</code> for the detail view.</p>

<p>We need to configure the prototype cell used by the collection view. Create a new class, subclassing <code>UICollectionViewCell</code>, create a <code>UIImageView</code> outlet and appropriate instance methods to set the image.</p>

<p>Go to the Storyboard and select the protoype cell in the collection view. In the identity inspector, set it’s class to the <code>UICollectionView</code> subclass you just created. Add a <code>UIImageView</code> to the prototype cell and connect the outlet.</p>

<p><img src="/img/import/blog/uicollectionview-example/2E0D5ECB395F41DEA921597398D5E79E.png" alt="2e0d5ecb395f41dea921597398d5e79e"></p>

<p>Make sure to set the <code>Identifier</code> in the Storyboard or the collection view won’t dequeue the proper class.</p>

<p>We need to queue up the updates from our <code>NSFetchedResultsController</code>, since <code>UICollectionView</code> can <em>only</em> perform batch updates (with animation). Serious oversight on Apple’s here, in my opinion, since it makes using <code>NSFetchedRsultsController</code> with <code>UICollectionView</code> very sticky.</p>

<p>You basically need to cache the updates to the sections and objects individually until the fetched results controller is finished with the updates. This is because of the <a href="https://ash-furrow.squarespace.com/blog/how-to-use-nsfetchedresultscontroller-with-uicollectionview">limitations imposed on <code>UICollectionView</code></a>.</p>

<p><em>Note</em>: We’re using batch updates because we are inserting more than one cell at a time, and we want that nice animation when adding each individual cell. You could call <code>reloadData</code> once all the results are loaded, but you wouldn’t have any animations, which are part of the delight of <code>NSCollectionVIew</code>.</p>

<p>Creating the <code>NSFetchedResultsController</code> is almost the exact same as the project template:</p>
<div class="highlight"><pre class="highlight objective_c"><code><span class="k">-</span> <span class="p">(</span><span class="n">NSFetchedResultsController</span> <span class="o">*</span><span class="p">)</span><span class="n">fetchedResultsController</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">_fetchedResultsController</span> <span class="o">!=</span> <span class="nb">nil</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">_fetchedResultsController</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">NSFetchRequest</span> <span class="o">*</span><span class="n">fetchRequest</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSFetchRequest</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">init</span><span class="p">];</span>
    <span class="c1">// Edit the entity name as appropriate.
</span>    <span class="n">NSEntityDescription</span> <span class="o">*</span><span class="n">entity</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSEntityDescription</span> <span class="nf">entityForName</span><span class="p">:</span><span class="s">@"AFPhotoModel"</span> <span class="nf">inManagedObjectContext</span><span class="p">:</span><span class="n">self</span><span class="p">.</span><span class="n">managedObjectContext</span><span class="p">];</span>
    <span class="p">[</span><span class="n">fetchRequest</span> <span class="nf">setEntity</span><span class="p">:</span><span class="n">entity</span><span class="p">];</span>

    <span class="c1">// Set the batch size to a suitable number.
</span>    <span class="p">[</span><span class="n">fetchRequest</span> <span class="nf">setFetchBatchSize</span><span class="p">:</span><span class="mi">20</span><span class="p">];</span>

    <span class="c1">// Edit the sort key as appropriate.
</span>    <span class="n">NSSortDescriptor</span> <span class="o">*</span><span class="n">sortDescriptor</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSSortDescriptor</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithKey</span><span class="p">:</span><span class="s">@"photoName"</span> <span class="nf">ascending</span><span class="p">:</span><span class="nb">NO</span><span class="p">];</span>
    <span class="n">NSArray</span> <span class="o">*</span><span class="n">sortDescriptors</span> <span class="o">=</span> <span class="p">@[</span><span class="n">sortDescriptor</span><span class="p">];</span>

    <span class="p">[</span><span class="n">fetchRequest</span> <span class="nf">setSortDescriptors</span><span class="p">:</span><span class="n">sortDescriptors</span><span class="p">];</span>

    <span class="c1">// Edit the section name key path and cache name if appropriate.
</span>    <span class="c1">// nil for section name key path means "no sections".
</span>    <span class="n">NSFetchedResultsController</span> <span class="o">*</span><span class="n">aFetchedResultsController</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSFetchedResultsController</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithFetchRequest</span><span class="p">:</span><span class="n">fetchRequest</span> <span class="nf">managedObjectContext</span><span class="p">:</span><span class="n">self</span><span class="p">.</span><span class="n">managedObjectContext</span> <span class="n">sectionNameKeyPath</span><span class="o">:</span><span class="nb">nil</span> <span class="n">cacheName</span><span class="o">:</span><span class="s">@"Master"</span><span class="p">];</span>
    <span class="n">aFetchedResultsController</span><span class="p">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="n">self</span><span class="p">;</span>
    <span class="n">self</span><span class="p">.</span><span class="n">fetchedResultsController</span> <span class="o">=</span> <span class="n">aFetchedResultsController</span><span class="p">;</span>

    <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">fetchedResultsController</span> <span class="nf">performFetch</span><span class="p">:</span><span class="o">&amp;</span><span class="n">error</span><span class="p">])</span> <span class="p">{</span>
         <span class="c1">// Replace this implementation with code to handle the error appropriately.
</span>         <span class="c1">// abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
</span>        <span class="n">NSLog</span><span class="p">(</span><span class="s">@"Unresolved error %@, %@"</span><span class="p">,</span> <span class="n">error</span><span class="p">,</span> <span class="p">[</span><span class="n">error</span> <span class="nf">userInfo</span><span class="p">]);</span>
        <span class="n">abort</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">_fetchedResultsController</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>Create two <code>NSMutableArray</code> instance variables and instantiate them in <code>viewDidLoad</code>. Implement the following <code>NSFetchedResultsControllerDelegate</code> methods.</p>
<div class="highlight"><pre class="highlight objective_c"><code><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">controller</span><span class="p">:(</span><span class="n">NSFetchedResultsController</span> <span class="o">*</span><span class="p">)</span><span class="nv">controller</span> 
    <span class="nf">didChangeSection</span><span class="p">:(</span><span class="n">id</span> <span class="o">&lt;</span><span class="n">NSFetchedResultsSectionInfo</span><span class="o">&gt;</span><span class="p">)</span><span class="nv">sectionInfo</span>
    <span class="nf">atIndex</span><span class="p">:(</span><span class="n">NSUInteger</span><span class="p">)</span><span class="nv">sectionIndex</span> 
    <span class="nf">forChangeType</span><span class="p">:(</span><span class="n">NSFetchedResultsChangeType</span><span class="p">)</span><span class="nv">type</span>
<span class="p">{</span>

    <span class="n">NSMutableDictionary</span> <span class="o">*</span><span class="n">change</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSMutableDictionary</span> <span class="nf">new</span><span class="p">];</span>

    <span class="k">switch</span><span class="p">(</span><span class="n">type</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">case</span> <span class="n">NSFetchedResultsChangeInsert</span><span class="p">:</span>
            <span class="n">change</span><span class="p">[</span><span class="err">@</span><span class="p">(</span><span class="n">type</span><span class="p">)]</span> <span class="o">=</span> <span class="p">@[</span><span class="err">@</span><span class="p">(</span><span class="n">sectionIndex</span><span class="p">)];</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="n">NSFetchedResultsChangeDelete</span><span class="p">:</span>
            <span class="n">change</span><span class="p">[</span><span class="err">@</span><span class="p">(</span><span class="n">type</span><span class="p">)]</span> <span class="o">=</span> <span class="p">@[</span><span class="err">@</span><span class="p">(</span><span class="n">sectionIndex</span><span class="p">)];</span>
            <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="p">[</span><span class="n">_sectionChanges</span> <span class="nf">addObject</span><span class="p">:</span><span class="n">change</span><span class="p">];</span>
<span class="p">}</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">controller</span><span class="p">:(</span><span class="n">NSFetchedResultsController</span> <span class="o">*</span><span class="p">)</span><span class="nv">controller</span> 
    <span class="nf">didChangeObject</span><span class="p">:(</span><span class="n">id</span><span class="p">)</span><span class="nv">anObject</span>
    <span class="nf">atIndexPath</span><span class="p">:(</span><span class="n">NSIndexPath</span> <span class="o">*</span><span class="p">)</span><span class="nv">indexPath</span> 
    <span class="nf">forChangeType</span><span class="p">:(</span><span class="n">NSFetchedResultsChangeType</span><span class="p">)</span><span class="nv">type</span>
    <span class="nf">newIndexPath</span><span class="p">:(</span><span class="n">NSIndexPath</span> <span class="o">*</span><span class="p">)</span><span class="nv">newIndexPath</span>
<span class="p">{</span>

    <span class="n">NSMutableDictionary</span> <span class="o">*</span><span class="n">change</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSMutableDictionary</span> <span class="nf">new</span><span class="p">];</span>
    <span class="k">switch</span><span class="p">(</span><span class="n">type</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">case</span> <span class="n">NSFetchedResultsChangeInsert</span><span class="p">:</span>
            <span class="n">change</span><span class="p">[</span><span class="err">@</span><span class="p">(</span><span class="n">type</span><span class="p">)]</span> <span class="o">=</span> <span class="n">newIndexPath</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="n">NSFetchedResultsChangeDelete</span><span class="p">:</span>
            <span class="n">change</span><span class="p">[</span><span class="err">@</span><span class="p">(</span><span class="n">type</span><span class="p">)]</span> <span class="o">=</span> <span class="n">indexPath</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="n">NSFetchedResultsChangeUpdate</span><span class="p">:</span>
            <span class="n">change</span><span class="p">[</span><span class="err">@</span><span class="p">(</span><span class="n">type</span><span class="p">)]</span> <span class="o">=</span> <span class="n">indexPath</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="n">NSFetchedResultsChangeMove</span><span class="p">:</span>
            <span class="n">change</span><span class="p">[</span><span class="err">@</span><span class="p">(</span><span class="n">type</span><span class="p">)]</span> <span class="o">=</span> <span class="p">@[</span><span class="n">indexPath</span><span class="p">,</span> <span class="n">newIndexPath</span><span class="p">];</span>
            <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="p">[</span><span class="n">_objectChanges</span> <span class="nf">addObject</span><span class="p">:</span><span class="n">change</span><span class="p">];</span>
<span class="p">}</span>
</code></pre></div>
<p>These two methods queue the updates to the collection view. The following method waits for the fetched results controller to be finished before dequeuing those updates and applying them to our collection view.</p>
<div class="highlight"><pre class="highlight objective_c"><code><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">controllerDidChangeContent</span><span class="p">:(</span><span class="n">NSFetchedResultsController</span> <span class="o">*</span><span class="p">)</span><span class="nv">controller</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">([</span><span class="n">_sectionChanges</span> <span class="nf">count</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">collectionView</span> <span class="nf">performBatchUpdates</span><span class="p">:</span><span class="o">^</span><span class="p">{</span>

            <span class="k">for</span> <span class="p">(</span><span class="n">NSDictionary</span> <span class="o">*</span><span class="n">change</span> <span class="k">in</span> <span class="n">_sectionChanges</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="p">[</span><span class="n">change</span> <span class="nf">enumerateKeysAndObjectsUsingBlock</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">NSNumber</span> <span class="o">*</span><span class="n">key</span><span class="p">,</span> <span class="n">id</span> <span class="n">obj</span><span class="p">,</span> <span class="n">BOOL</span> <span class="o">*</span><span class="n">stop</span><span class="p">)</span> <span class="p">{</span>

                    <span class="n">NSFetchedResultsChangeType</span> <span class="n">type</span> <span class="o">=</span> <span class="p">[</span><span class="n">key</span> <span class="nf">unsignedIntegerValue</span><span class="p">];</span>
                    <span class="k">switch</span> <span class="p">(</span><span class="n">type</span><span class="p">)</span>
                    <span class="p">{</span>
                        <span class="k">case</span> <span class="n">NSFetchedResultsChangeInsert</span><span class="p">:</span>
                            <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">collectionView</span> <span class="nf">insertSections</span><span class="p">:[</span><span class="n">NSIndexSet</span> <span class="nf">indexSetWithIndex</span><span class="p">:[</span><span class="n">obj</span> <span class="nf">unsignedIntegerValue</span><span class="p">]]];</span>
                            <span class="k">break</span><span class="p">;</span>
                        <span class="k">case</span> <span class="n">NSFetchedResultsChangeDelete</span><span class="p">:</span>
                            <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">collectionView</span> <span class="nf">deleteSections</span><span class="p">:[</span><span class="n">NSIndexSet</span> <span class="nf">indexSetWithIndex</span><span class="p">:[</span><span class="n">obj</span> <span class="nf">unsignedIntegerValue</span><span class="p">]]];</span>
                            <span class="k">break</span><span class="p">;</span>
                        <span class="k">case</span> <span class="n">NSFetchedResultsChangeUpdate</span><span class="p">:</span>
                            <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">collectionView</span> <span class="nf">reloadSections</span><span class="p">:[</span><span class="n">NSIndexSet</span> <span class="nf">indexSetWithIndex</span><span class="p">:[</span><span class="n">obj</span> <span class="nf">unsignedIntegerValue</span><span class="p">]]];</span>
                            <span class="k">break</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}];</span>
            <span class="p">}</span>
        <span class="p">}</span> <span class="nf">completion</span><span class="p">:</span><span class="nb">nil</span><span class="p">];</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">([</span><span class="n">_objectChanges</span> <span class="nf">count</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="p">[</span><span class="n">_sectionChanges</span> <span class="nf">count</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">collectionView</span> <span class="nf">performBatchUpdates</span><span class="p">:</span><span class="o">^</span><span class="p">{</span>

            <span class="k">for</span> <span class="p">(</span><span class="n">NSDictionary</span> <span class="o">*</span><span class="n">change</span> <span class="k">in</span> <span class="n">_objectChanges</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="p">[</span><span class="n">change</span> <span class="nf">enumerateKeysAndObjectsUsingBlock</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">NSNumber</span> <span class="o">*</span><span class="n">key</span><span class="p">,</span> <span class="n">id</span> <span class="n">obj</span><span class="p">,</span> <span class="n">BOOL</span> <span class="o">*</span><span class="n">stop</span><span class="p">)</span> <span class="p">{</span>

                    <span class="n">NSFetchedResultsChangeType</span> <span class="n">type</span> <span class="o">=</span> <span class="p">[</span><span class="n">key</span> <span class="nf">unsignedIntegerValue</span><span class="p">];</span>
                    <span class="k">switch</span> <span class="p">(</span><span class="n">type</span><span class="p">)</span>
                    <span class="p">{</span>
                        <span class="k">case</span> <span class="n">NSFetchedResultsChangeInsert</span><span class="p">:</span>
                            <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">collectionView</span> <span class="nf">insertItemsAtIndexPaths</span><span class="p">:@[</span><span class="n">obj</span><span class="p">]];</span>
                            <span class="k">break</span><span class="p">;</span>
                        <span class="k">case</span> <span class="n">NSFetchedResultsChangeDelete</span><span class="p">:</span>
                            <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">collectionView</span> <span class="nf">deleteItemsAtIndexPaths</span><span class="p">:@[</span><span class="n">obj</span><span class="p">]];</span>
                            <span class="k">break</span><span class="p">;</span>
                        <span class="k">case</span> <span class="n">NSFetchedResultsChangeUpdate</span><span class="p">:</span>
                            <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">collectionView</span> <span class="nf">reloadItemsAtIndexPaths</span><span class="p">:@[</span><span class="n">obj</span><span class="p">]];</span>
                            <span class="k">break</span><span class="p">;</span>
                        <span class="k">case</span> <span class="n">NSFetchedResultsChangeMove</span><span class="p">:</span>
                            <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">collectionView</span> <span class="nf">moveItemAtIndexPath</span><span class="p">:</span><span class="n">obj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="nf">toIndexPath</span><span class="p">:</span><span class="n">obj</span><span class="p">[</span><span class="mi">1</span><span class="p">]];</span>
                            <span class="k">break</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}];</span>
            <span class="p">}</span>
        <span class="p">}</span> <span class="nf">completion</span><span class="p">:</span><span class="nb">nil</span><span class="p">];</span>
    <span class="p">}</span>

    <span class="p">[</span><span class="n">_sectionChanges</span> <span class="nf">removeAllObjects</span><span class="p">];</span>
    <span class="p">[</span><span class="n">_objectChanges</span> <span class="nf">removeAllObjects</span><span class="p">];</span>
<span class="p">}</span>
</code></pre></div>
<p>These methods should work for any <code>UICollectionView</code> and <code>NSFetchedResultsController</code> data.</p>

<p>Now that the <code>NSFetchedResultsController</code> is hooked up the the <code>UICollectionView</code>, let’s load some photos from 500px!</p>

<p>Use the consumer key and consumer secret from when you <a href="http://developers.500px.com/settings/applications?from=developers">registered your application</a> earlier. Follow the directions in the <a href="https://github.com/500px/500px-iOS-api">iOS 500px SDK</a> to add the 500px SDK to your Xcode project. Make sure to follow the instructions in the SDKs <code>README</code> to set up your project to use the SDK.</p>
<div class="highlight"><pre class="highlight objective_c"><code><span class="p">[</span><span class="n">PXRequest</span> <span class="nf">setConsumerKey</span><span class="p">:</span><span class="s">@"your consumer key"</span> <span class="nf">consumerSecret</span><span class="p">:</span><span class="s">@"your consumer secret"</span><span class="p">];</span>

<span class="p">[</span><span class="n">PXRequest</span> <span class="nf">requestForPhotoFeature</span><span class="p">:</span><span class="n">PXAPIHelperPhotoFeaturePopular</span> <span class="nf">completion</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">NSDictionary</span> <span class="o">*</span><span class="n">results</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">error</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="p">[[[</span><span class="n">UIAlertView</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithTitle</span><span class="p">:</span><span class="s">@"Couldn't fetch from 500px."</span> <span class="nf">message</span><span class="p">:</span><span class="n">error</span><span class="p">.</span><span class="n">localizedDescription</span> <span class="nf">delegate</span><span class="p">:</span><span class="nb">nil</span> <span class="nf">cancelButtonTitle</span><span class="p">:</span><span class="nb">nil</span> <span class="n">otherButtonTitles</span><span class="o">:</span><span class="s">@"OK"</span><span class="p">,</span> <span class="nb">nil</span><span class="p">]</span> <span class="n">show</span><span class="p">];</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">NSArray</span> <span class="o">*</span><span class="n">photoArray</span> <span class="o">=</span> <span class="p">[</span><span class="n">results</span> <span class="nf">valueForKey</span><span class="p">:</span><span class="s">@"photos"</span><span class="p">];</span>

    <span class="k">for</span> <span class="p">(</span><span class="n">NSDictionary</span> <span class="o">*</span><span class="n">photoDictionary</span> <span class="k">in</span> <span class="n">photoArray</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">NSManagedObject</span> <span class="o">*</span><span class="n">photoModel</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSEntityDescription</span> <span class="nf">insertNewObjectForEntityForName</span><span class="p">:</span><span class="s">@"AFPhotoModel"</span> <span class="nf">inManagedObjectContext</span><span class="p">:</span><span class="n">AppDelegate</span><span class="p">.</span><span class="n">managedObjectContext</span><span class="p">];</span>
        <span class="p">[</span><span class="n">photoModel</span> <span class="nf">setValue</span><span class="p">:[</span><span class="n">photoDictionary</span> <span class="nf">valueForKey</span><span class="p">:</span><span class="s">@"rating"</span><span class="p">]</span> <span class="nf">forKey</span><span class="p">:</span><span class="s">@"photoRating"</span><span class="p">];</span>
        <span class="p">[</span><span class="n">photoModel</span> <span class="nf">setValue</span><span class="p">:[</span><span class="n">photoDictionary</span> <span class="nf">valueForKey</span><span class="p">:</span><span class="s">@"name"</span><span class="p">]</span> <span class="nf">forKey</span><span class="p">:</span><span class="s">@"photoName"</span><span class="p">];</span>

        <span class="n">dispatch_async</span><span class="p">(</span><span class="n">dispatch_get_global_queue</span><span class="p">(</span><span class="n">DISPATCH_QUEUE_PRIORITY_HIGH</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="o">^</span><span class="p">{</span>
            <span class="n">NSString</span> <span class="o">*</span><span class="n">urlString</span> <span class="o">=</span> <span class="p">[[[</span><span class="n">photoDictionary</span> <span class="nf">valueForKey</span><span class="p">:</span><span class="s">@"images"</span><span class="p">]</span> <span class="nf">objectAtIndex</span><span class="p">:</span><span class="mi">0</span><span class="p">]</span> <span class="nf">valueForKey</span><span class="p">:</span><span class="s">@"url"</span><span class="p">];</span>
            <span class="n">NSData</span> <span class="o">*</span><span class="n">imageData</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSData</span> <span class="nf">dataWithContentsOfURL</span><span class="p">:[</span><span class="n">NSURL</span> <span class="nf">URLWithString</span><span class="p">:</span><span class="n">urlString</span><span class="p">]];</span>
            <span class="n">dispatch_async</span><span class="p">(</span><span class="n">dispatch_get_main_queue</span><span class="p">(),</span> <span class="o">^</span><span class="p">{</span>
                <span class="p">[</span><span class="n">photoModel</span> <span class="nf">setValue</span><span class="p">:</span><span class="n">imageData</span> <span class="nf">forKey</span><span class="p">:</span><span class="s">@"photoImageData"</span><span class="p">];</span>
            <span class="p">});</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}];</span>
</code></pre></div>
<p>The fetched results controller will take care of that magic for us. We just need to configure our cells.</p>
<div class="highlight"><pre class="highlight objective_c"><code><span class="k">-</span> <span class="p">(</span><span class="n">UICollectionViewCell</span> <span class="o">*</span><span class="p">)</span><span class="nf">collectionView</span><span class="p">:(</span><span class="n">UICollectionView</span> <span class="o">*</span><span class="p">)</span><span class="nv">collectionView</span> <span class="nf">cellForItemAtIndexPath</span><span class="p">:(</span><span class="n">NSIndexPath</span> <span class="o">*</span><span class="p">)</span><span class="nv">indexPath</span>
<span class="p">{</span>
    <span class="n">AFCollectionViewCell</span> <span class="o">*</span><span class="n">cell</span> <span class="o">=</span> <span class="p">(</span><span class="n">AFCollectionViewCell</span> <span class="o">*</span><span class="p">)[</span><span class="n">collectionView</span> <span class="nf">dequeueReusableCellWithReuseIdentifier</span><span class="p">:</span><span class="n">CellIdentifier</span> <span class="nf">forIndexPath</span><span class="p">:</span><span class="n">indexPath</span><span class="p">];</span>

    <span class="n">NSManagedObject</span> <span class="o">*</span><span class="n">object</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">fetchedResultsController</span> <span class="nf">objectAtIndexPath</span><span class="p">:</span><span class="n">indexPath</span><span class="p">];</span>
    <span class="p">[</span><span class="n">cell</span> <span class="nf">setImage</span><span class="p">:[</span><span class="n">UIImage</span> <span class="nf">imageWithData</span><span class="p">:[</span><span class="n">object</span> <span class="nf">valueForKey</span><span class="p">:</span><span class="s">@"photoImageData"</span><span class="p">]]];</span>

    <span class="k">return</span> <span class="n">cell</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p><img src="/img/import/blog/uicollectionview-example/E8ECC8892EEB418D9FE04C6A04AD5436.png" alt="E8ecc8892eeb418d9fe04c6a04ad5436"></p>

<p>I went to the liberty of adjusting the sizes to make things pretty - nice app! Let’s connect the detail view controller now.</p>

<p>Open the Storyboard and right-click on the prototype cell. We’ll be connecting the <code>selection</code> triggered segue to the detail view controller. Drag the circle beside <code>selection</code> to the detail view controller and choose “push” from the menu that appears.</p>

<p><img src="/img/import/blog/uicollectionview-example/AF66949DE9D6407C8288A2B406292DB8.png" alt="Af66949de9d6407c8288a2b406292db8"></p>

<p>Select the segue and make sure its identifier is set to “showDetail”.</p>

<p>Replace the <code>UILabel</code> with a <code>UIImageView</code>, change the <code>IBOutlet</code> in the header file, reconnect the outlet, and modify <code>configureView</code> to look like the following:</p>
<div class="highlight"><pre class="highlight objective_c"><code><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">configureView</span>
<span class="p">{</span>
    <span class="c1">// Update the user interface for the detail item.
</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">detailItem</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">self</span><span class="p">.</span><span class="n">detailImageView</span><span class="p">.</span><span class="n">image</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIImage</span> <span class="nf">imageWithData</span><span class="p">:[</span><span class="n">self</span><span class="p">.</span><span class="n">detailItem</span> <span class="nf">valueForKey</span><span class="p">:</span><span class="s">@"photoImageData"</span><span class="p">]];</span>
        <span class="n">self</span><span class="p">.</span><span class="n">title</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">detailItem</span> <span class="nf">valueForKey</span><span class="p">:</span><span class="s">@"photoName"</span><span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>In the master view controller, <code>prepareForSegue:sender:</code> should look like the following:</p>
<div class="highlight"><pre class="highlight objective_c"><code><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">prepareForSegue</span><span class="p">:(</span><span class="n">UIStoryboardSegue</span> <span class="o">*</span><span class="p">)</span><span class="nv">segue</span> <span class="nf">sender</span><span class="p">:(</span><span class="n">id</span><span class="p">)</span><span class="nv">sender</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">([[</span><span class="n">segue</span> <span class="nf">identifier</span><span class="p">]</span> <span class="nf">isEqualToString</span><span class="p">:</span><span class="s">@"showDetail"</span><span class="p">])</span> <span class="p">{</span>
        <span class="n">NSIndexPath</span> <span class="o">*</span><span class="n">indexPath</span> <span class="o">=</span> <span class="p">[[</span><span class="n">self</span><span class="p">.</span><span class="n">collectionView</span> <span class="nf">indexPathsForSelectedItems</span><span class="p">]</span> <span class="nf">lastObject</span><span class="p">];</span>
        <span class="n">NSManagedObject</span> <span class="o">*</span><span class="n">object</span> <span class="o">=</span> <span class="p">[[</span><span class="n">self</span> <span class="nf">fetchedResultsController</span><span class="p">]</span> <span class="nf">objectAtIndexPath</span><span class="p">:</span><span class="n">indexPath</span><span class="p">];</span>
        <span class="p">[[</span><span class="n">segue</span> <span class="nf">destinationViewController</span><span class="p">]</span> <span class="nf">setDetailItem</span><span class="p">:</span><span class="n">object</span><span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Run the app, tap on a photo, and you’ll see the following:</p>

<p><img src="/img/import/blog/uicollectionview-example/2E826D143C214E178029F7B19AE16936.png" alt="2e826d143c214e178029f7b19ae16936"></p>

<p>Looks great!</p>

<p>If you have any questions, please let me know. Check out <a href="https://github.com/AshFurrow/UICollectionViewExample">the code</a> from GitHub and have fun!</p>
<hr>
<span class="meta"><a href="https://github.com/ashfurrow/blog/blob/master/source/blog/2012-09-19-uicollectionview-example.html.markdown">Please submit typo corrections on GitHub</a></span>
</div></div></article><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
<hr>
<div id="book-link">
<a href="http://www.amazon.com/gp/product/B00IHZKDCU/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=B00IHZKDCU&amp;linkCode=as2&amp;tag=ashfur-20&amp;linkId=T2MHOE5AYIWQTV3G" onclick="trackMaretingLink('collectionview')"><img src="/img/marketing/collectionview.jpg"></a><a class="visible-md visible-lg" href="http://www.amazon.com/gp/product/B00IHZKDCU/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=B00IHZKDCU&amp;linkCode=as2&amp;tag=ashfur-20&amp;linkId=T2MHOE5AYIWQTV3G" onclick="trackMaretingLink('collectionview')"><h3>Enjoyed my post? You'd love my book!</h3></a><a class="visible-xs visible-sm" href="http://www.amazon.com/gp/product/B00IHZKDCU/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=B00IHZKDCU&amp;linkCode=as2&amp;tag=ashfur-20&amp;linkId=T2MHOE5AYIWQTV3G" onclick="trackMaretingLink('collectionview')"><h3>Enjoyed my post?</h3></a><p>UICollectionView: The Complete Guide will help you build highly immersive, cutting-edge iOS user interfaces that transform your apps from good to great!</p>
</div>
<div class="clearfix"></div>
<hr>
<ul class="pager article_pager">
<li class="next"><a href="/blog/twitter-cuts-ifttts-balls-off/"><div>Twitter Cuts IFTTT's Balls Off</div></a></li>
<li class="previous"><a href="/blog/nscharacterset-on-nshipster/"><div>NSCharacterSet on NSHipster</div></a></li>
</ul>
</div></div>
</div>
<hr id="page_footer">
<footer><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
<ul class="list-inline text-center">
<li><a href="https://twitter.com/ashfurrow" title="Twitter"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fab fa-twitter fa-stack-1x fa-inverse"></i></span></a></li>
<li><a href="https://github.com/ashfurrow" title="GitHub"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fab fa-github fa-stack-1x fa-inverse"></i></span></a></li>
<li><a href="https://photos.ashfurrow.com" title="Photo Blog"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fas fa-image fa-stack-1x fa-inverse"></i></span></a></li>
<li><a href="http://instagram.com/ashfurrow" title="Instagram"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fab fa-instagram fa-stack-1x fa-inverse"></i></span></a></li>
</ul>
<p class="copyright text-muted"> This site is <a href="http://github.com/ashfurrow/blog">open source</a>. <a href="http://purl.org/dc/dcmitype/Text">Content</a> licensed under <a href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0</a>.</p>
</div></div></div></footer><script src="//code.jquery.com/jquery-2.1.4.min.js"></script><script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script><script src="/javascripts/all.js"></script>
</body>
</html>
